# 1.mysql调优 ——使用profiles，performance_schema 性能监控



## 如何回答优化问题

结合工作场景进行回答muysql的优化的问题



## mysql 架构图

client -> server -> 存储引擎

连接



分析器（AST）

优化器（RBU 基于规则的优化，CBU 基于成本的优化）

执行器：和存储引擎交互



存储引擎：IO优化（减少IO次数，提升IO效率）





## 性能监控

### profile



set profiling=1;

show profile;



shhow profile for [query_id];



show profile cpu;



### performance schema





### processlist

查看链接总数





## schema 与数据类型优化



### 数据类型优化

1. 更小的通常更好
2. 简单就好
3. 尽量避免null
4. 实际细则
   1. 整数类型
   2. 字符和字符串
   3. blob和text
   4. date和timestamp及datetime
   5. 使用枚举类型代替字符串
   6. 特殊数据类型，如IP

