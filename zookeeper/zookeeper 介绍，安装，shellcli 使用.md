# zookeeper 介绍，安装，shellcli 使用

## 回顾 redis

单实例  快



复制集群

HA sentinel

不是绝对实时同步，有一定的延迟；可能连最终一致性都谈不上



集群模式，分片





穿透、击穿、雪崩、分布式锁

## 基础介绍

> 分布式协调服务

1. leader肯定会挂
2. 服务不可用
3. 不可靠的集群
4. 事实，zk集群集群高可用
5. 如果有一种方式，可以快速的恢复出一个leader

两种运行状态：

1. 可用状态
2. 不可用状态
3. 不可用状态，恢复到可用状态，越快越好





zookeeper 是一个目录树结构

node可以存储数据1m

持久节点

临时节点：session

序列节点



## 担保

顺序一致性：客户端的更新按照发送顺序应用

原子性：更新成功或失败，没有部分结果

单系统映像:无论哪台服务器，客户端都将得到相同的系统映像

可靠性：一旦应用了更新，它将从那时起持续到更新完成

及时性：







## 能力

1. 统一配置<- 1m的数据存储
2. 分组管理<- path结构
3. 统一命名<- sequence
4. 同步<- 临时节点



### 同步

​	分布式锁，临时节点

锁一坨一个父节点且具备-s，代表父节点下有多把锁  

队列的事务的锁



### HA 选主

通过 序列化节点实现





## 2888

leader接受write请求

## 3888

选主投票用的



## 安装笔记

